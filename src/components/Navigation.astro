---
// Navigation component - shared across all pages
import { SITE } from '../config/site';

export interface Props {
  logo?: string;
}

const { logo = SITE.name } = Astro.props;
---

<header id="navbar" class="sticky top-0 z-40 bg-stone-950/90 backdrop-blur-lg border-b border-stone-800" data-ps="src/components/Navigation.astro:dt8k86">
  <nav class="py-4" data-ps="src/components/Navigation.astro:m59h3b">
    <div class="max-w-7xl mx-auto px-8 flex justify-between items-center" data-ps="src/components/Navigation.astro:gqvsde">
      <!-- Logo -->
      <a href="/" class="text-2xl font-bold no-underline hover:opacity-80 transition-opacity text-stone-50" data-ps="src/components/Navigation.astro:kd8n5x">
        {logo}
      </a>

      <div class="flex items-center gap-4" data-ps="src/components/Navigation.astro:gqvsdd">
        <!-- Desktop Navigation -->
        <div class="hidden md:flex gap-8 items-center" data-ps="src/components/Navigation.astro:gqvsdc">
          <a href="/#story" class="no-underline font-medium transition-colors hover:text-amber-600 text-stone-400" data-ps="src/components/Navigation.astro:kd8n5y">Story</a>
          <a href="/#menu" class="no-underline font-medium transition-colors hover:text-amber-600 text-stone-400" data-ps="src/components/Navigation.astro:kd8n5y-1">Menu</a>
          <a href="/#gallery" class="no-underline font-medium transition-colors hover:text-amber-600 text-stone-400" data-ps="src/components/Navigation.astro:kd8n5y-2">Gallery</a>
          <a href="/#visit" class="no-underline font-medium transition-colors hover:text-amber-600 text-stone-400" data-ps="src/components/Navigation.astro:kd8n5y-3">Visit</a>
          <a href="/#visit" class="px-5 py-2 bg-amber-700 text-white rounded font-bold hover:bg-amber-800 transition-all text-sm" data-ps="src/components/Navigation.astro:kd8n5y-4">Reserve</a>
        </div>

        <!-- Mobile Menu Button (Hamburger) -->
        <button
          id="mobile-menu-button"
          type="button"
          class="md:hidden p-2 text-stone-50"
          aria-label="Toggle navigation menu"
          aria-expanded="false"
          aria-controls="mobile-menu"
         data-ps="src/components/Navigation.astro:4mvaf">
          <!-- Hamburger icon -->
          <svg id="menu-icon-open" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <!-- Close icon -->
          <svg id="menu-icon-close" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile Menu - Dropdown that pushes content -->
  <div
    id="mobile-menu"
    class="hidden md:hidden overflow-hidden bg-stone-900 border-b border-stone-800"
    role="navigation"
    aria-label="Mobile navigation"
   data-ps="src/components/Navigation.astro:gqvsdb">
    <nav class="flex flex-col py-4 px-8 gap-4" data-ps="src/components/Navigation.astro:m59h3c">
      <a href="/#story" class="no-underline font-medium py-2 text-stone-300 hover:text-amber-600 transition-opacity" data-ps="src/components/Navigation.astro:kd8n5z">Story</a>
      <a href="/#menu" class="no-underline font-medium py-2 text-stone-300 hover:text-amber-600 transition-opacity" data-ps="src/components/Navigation.astro:kd8n5z-1">Menu</a>
      <a href="/#gallery" class="no-underline font-medium py-2 text-stone-300 hover:text-amber-600 transition-opacity" data-ps="src/components/Navigation.astro:kd8n5z-2">Gallery</a>
      <a href="/#visit" class="no-underline font-medium py-2 text-stone-300 hover:text-amber-600 transition-opacity" data-ps="src/components/Navigation.astro:kd8n5z-3">Visit</a>
      <a href="/#visit" class="w-full text-center py-3 bg-amber-700 text-white rounded font-bold" data-ps="src/components/Navigation.astro:kd8n5z-4">Reserve</a>
    </nav>
  </div>
</header>

<script is:inline>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIconOpen = document.getElementById('menu-icon-open');
  const menuIconClose = document.getElementById('menu-icon-close');

  function toggleMenu() {
    const isHidden = mobileMenu?.classList.contains('hidden');

    if (isHidden) {
      mobileMenu?.classList.remove('hidden');
      menuIconOpen?.classList.add('hidden');
      menuIconClose?.classList.remove('hidden');
      mobileMenuButton?.setAttribute('aria-expanded', 'true');
    } else {
      mobileMenu?.classList.add('hidden');
      menuIconOpen?.classList.remove('hidden');
      menuIconClose?.classList.add('hidden');
      mobileMenuButton?.setAttribute('aria-expanded', 'false');
    }
  }

  function closeMenu() {
    mobileMenu?.classList.add('hidden');
    menuIconOpen?.classList.remove('hidden');
    menuIconClose?.classList.add('hidden');
    mobileMenuButton?.setAttribute('aria-expanded', 'false');
  }

  mobileMenuButton?.addEventListener('click', toggleMenu);

  // Close mobile menu when clicking on a link
  const mobileMenuLinks = mobileMenu?.querySelectorAll('a');
  mobileMenuLinks?.forEach(link => {
    link.addEventListener('click', closeMenu);
  });

  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !mobileMenu?.classList.contains('hidden')) {
      closeMenu();
    }
  });
</script>