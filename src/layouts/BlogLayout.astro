---
import '../styles/global.css';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
import SEOHead from '../components/SEOHead.astro';
import { SITE } from '../config/site';

const { frontmatter, mdxFilePath = '' } = Astro.props;

// Debug logging (will show in Astro build output)
console.log('[BlogLayout] MDX file path:', mdxFilePath);
---

<!doctype html>
<html lang="en">
  <head>
    <SEOHead
      title={`${frontmatter.title} â€“ ${SITE.name}`}
      description={frontmatter.description}
      type="article"
      publishedTime={frontmatter.pubDate?.toISOString?.()}
      jsonLd={{
        '@context': 'https://schema.org',
        '@type': 'Article',
        headline: frontmatter.title,
        description: frontmatter.description,
        datePublished: frontmatter.pubDate?.toISOString?.(),
        author: frontmatter.author || SITE.name,
        url: new URL(Astro.url.pathname, SITE.url).toString(),
      }}
    />
  </head>
  <body class="min-h-screen" style="background: var(--background); color: var(--text);" data-ps="src/layouts/BlogLayout.astro:rqzn4e">
    <Navigation />

    <article
      class="container mx-auto max-w-3xl px-4 pb-12"
      style="padding-top: var(--nav-height);"
      data-mdx-file={mdxFilePath}
      data-mdx-type="blog"
     data-ps="src/layouts/BlogLayout.astro:xkhs7u">
      <header class="mb-8" data-ps="src/layouts/BlogLayout.astro:fqly23">
        <h1 class="mb-4 text-4xl md:text-5xl font-bold" data-ps="src/layouts/BlogLayout.astro:sihpnt">{frontmatter.title}</h1>
        <div class="flex items-center gap-4 text-sm" style="color: var(--text-muted);" data-ps="src/layouts/BlogLayout.astro:o33ul5">
          {frontmatter.pubDate && (
            <time datetime={frontmatter.pubDate.toISOString()}>
              {frontmatter.pubDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              })}
            </time>
          )}
          {frontmatter.author && <span data-ps="src/layouts/BlogLayout.astro:dfgz5k">by {frontmatter.author}</span>}
          {frontmatter.category && (
            <span class="rounded-full px-3 py-1" style="background: var(--surface); color: var(--text);" data-ps="src/layouts/BlogLayout.astro:dfgz5l">
              {frontmatter.category}
            </span>
          )}
        </div>
      </header>

      <div class="prose prose-lg max-w-none" data-ps="src/layouts/BlogLayout.astro:o33ul6">
        <slot />
      </div>

      {frontmatter.tags && frontmatter.tags.length > 0 && (
        <footer class="mt-12 pt-8" style="border-top: 1px solid var(--border);" data-ps="src/layouts/BlogLayout.astro:fydg8a">
          <div class="flex flex-wrap gap-2" data-ps="src/layouts/BlogLayout.astro:o33ul7">
            {frontmatter.tags.map((tag) => (
              <span class="rounded-md px-3 py-1 text-sm" style="background: var(--surface); color: var(--text-muted);" data-ps="src/layouts/BlogLayout.astro:dfgz5m">
                #{tag}
              </span>
            ))}
          </div>
        </footer>
      )}
    </article>

    <Footer />
  </body>
</html>
